for(var f,l="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba=function(){ba=function(){};l.Symbol||(l.Symbol=ca)},da=0,ca=function(a){return"jscomp_symbol_"+(a||"")+da++},m=function(){ba();var a=l.Symbol.iterator;a||(a=l.Symbol.iterator=l.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,
a,{configurable:!0,writable:!0,value:function(){return fa(this)}});m=function(){}},fa=function(a){var b=0;return ha(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})},ha=function(a){m();a={next:a};a[l.Symbol.iterator]=function(){return this};return a},ia=function(a){m();var b=a[Symbol.iterator];return b?b.call(a):fa(a)},ja=function(a,b){m();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,
value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d},n=l,p=["Array","prototype","keys"],ka=0;ka<p.length-1;ka++){var la=p[ka];la in n||(n[la]={});n=n[la]}var ma=p[p.length-1],na=n[ma],oa=na?na:function(){return ja(this,function(a){return a})};oa!=na&&null!=oa&&aa(n,ma,{configurable:!0,writable:!0,value:oa});
var pa=this,q=function(a){return"string"==typeof a},r=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&
!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b},t=function(a){return"array"==r(a)},qa="closure_uid_"+(1E9*Math.random()>>>0),ra=0,sa=Date.now||function(){return+new Date},u=function(a,b){a=a.split(".");var c=pa;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}:c[d]=b},v=function(a,b){function c(){}c.prototype=
b.prototype;a.Xa=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Sa=function(a,c,g){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};var ta=angular.module("henhouse.templates",[]).value("forceCachedTemplates",!1).value("forceUncachedTemplates",!1).factory("html2JsTemplatesCached",["forceCachedTemplates","forceUncachedTemplates",function(a,b){return function(){return!b&&!0}}]).run(["$templateCache","html2JsTemplatesCached",function(a,b){function c(a){return a.replace(/\"/g,"&quot;").replace(/\'/g,"&apos;")}b()&&(a.put("components/api_key_bar/api-key-bar.html",'<div class="api-key-bar" layout="row" layout-align="center center">\n    <div ng-if="::$ctrl.showApiKeyName" class="api-key-bar-display-name" flex="20">\n      {{::$ctrl.key.displayName}}\n    </div>\n    <div class="api-key-bar-api-key" data-test-api-key flex>\n      {{::$ctrl.key.currentKey}}\n    </div>\n    <md-button class="md-icon-button" ng-click="$ctrl.clickToCopyKey()">\n      <md-icon id="hen-copy-icon" class="md-accent md-hue-2">\n        content_copy\n      </md-icon>\n    </md-button>\n  </div>\n</div>\n'),
a.put("components/billing_page/billing-page.html",'<h1 data-test-header-title class="hen-page-header">\n  Configure a billing account\n</h1>\n<div class="hen-billing-page-content">\n  <hen-message type="error" class="hen-billing-message">\n    {{$ctrl.apiTitle}} requires that you enable billing on this project before it can be activated. Visit the <a class="hen-link" ng-href="{{::$ctrl.consoleUrl}}" target="_blank">API Console</a> to configure a billing account and return here to continue when you\'re done.\n  </hen-message>\n  <div class="hen-button-bar">\n    <div layout="row">\n      <div flex></div>\n      <div>\n        <md-button ng-click="$ctrl.onCancel()">\n          Cancel\n        </md-button>\n        <md-button class="md-primary" ng-click="$ctrl.onComplete()">\n          Continue\n        </md-button>\n      </div>\n    </div>\n  </div>\n</div>\n'),
a.put("components/brand_editor/brand-editor.html",['<h1 data-test-header-title class="hen-page-header">\n  Configure your OAuth client\n</h1>\n<div class="hen-brand-page-content">\n  <div class="hen-loading-page-content" layout="column" ng-if="$ctrl.pageIsLoading">\n    <div flex></div>\n      <div layout="row">\n        <div flex></div>\n          <md-progress-circular md-mode="indeterminate" md-diameter="60"></md-progress-circular>\n        <div flex></div>\n      </div>\n    <div flex></div>\n  </div>\n  <form ng-submit="$ctrl.onComplete()" ng-if="!$ctrl.pageIsLoading">\n    <hen-message type="error" class="hen-abuse-error"\n        ng-if="$ctrl.showAbuseMessage">\n      We detected a problem with the <b>Product name</b> field. Make sure it describes your specific product and avoid using a name that suggests that your product comes from Google or another company. <a class="hen-link" href="https://support.google.com/cloud/answer/7393717" target="_blank"> Learn more </a>\n    </hen-message>\n    <div class="hen-brand-note">\n      Specify the product name that will be shown on the user consent screen. <a class="hen-link" href="https://developers.google.com/identity/protocols/OAuth2" target="_blank">Learn more</a>\n    </div>\n    <md-input-container md-no-float md-is-error="$ctrl.showAbuseMessage" class="hen-brand">\n      <input required ng-model="$ctrl.brand.displayName"',
'          placeholder="'+c("Product name")+'">','    </md-input-container>\n    <hen-message type="info" class="hen-brand-email-details">\n      An email address is sometimes shown on the user consent screen. We will use <span class="hen-brand-email">{{::$ctrl.brand.supportEmail}}</span>. You can edit this later in the <a class="hen-link" ng-href="{{::$ctrl.getConsoleUrl()}}" target="_blank">API Console</a>.\n    </hen-message>\n    <div class="hen-button-bar">\n      <div layout="row">\n        <div flex></div>\n        <div>\n          <md-button ng-click="$ctrl.onCancel()">\n            Cancel\n          </md-button>\n          <md-button type="submit" class="md-primary">\n            Next\n          </md-button>\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n'].join("\n")),
a.put("components/hen_message/hen-message.html",'<div layout="row" layout-align="center center">\n  <div class=\'hen-message-icon\' flex>\n    <md-icon class="material-icons {{$ctrl.iconDetails.className}}">\n      {{$ctrl.iconDetails.iconName}}\n    </md-icon>\n  </div>\n  <div class="hen-note" ng-transclude flex></div>\n</div>\n'),a.put("components/henhouse_flow/henhouse-flow.html",'  <div ng-if="$ctrl.step.id == \'INTRO\'">\n    <h1 data-test-header-title class="hen-page-header">{{$ctrl.getApiTitle()}}</h1>\n    <div class="hen-project-page-content">\n      <hen-project-selector on-submit="$ctrl.completeIntro()"></hen-project-selector>\n      <hen-message type="error" class="hen-project-page-component"\n        ng-if="!$ctrl.projectLabelIsValid()">\n          Project names must be between 4 and 30 characters and may only contain letters, numbers, spaces, and hyphens.\n      </hen-message>\n      <hen-message type="error" class="hen-project-page-component"\n          ng-if="!$ctrl.userProbablyHasPermission">\n        You don\'t have permission to manage APIs for this project.<br/> Create or select another project to continue.\n      </hen-message>\n      <hen-tos-opt-in ng-if="$ctrl.isTosVisible()" is-accepted="$ctrl.tosAccepted"\n          class="hen-project-page-component">\n      </hen-tos-opt-in>\n    </div>\n    <div class="hen-button-bar">\n      <div layout="row">\n        <div flex></div>\n        <div>\n          <md-button ng-click="$ctrl.cancel()">\n            Cancel\n          </md-button>\n          <md-button ng-click="$ctrl.completeIntro()"\n                     class="md-primary"\n                     ng-disabled="!$ctrl.isValidForFlow()">\n            <span ng-if="$ctrl.projectSelectorDetails.state == \'NEW_PROJECT\'">\n            Create and Enable API\n            </span>\n            <span ng-if="$ctrl.projectSelectorDetails.state == \'EXISTING_PROJECT\'">\n            Enable API\n            </span>\n          </md-button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <hen-brand-editor ng-if="$ctrl.step.id == \'BRAND\'"\n      on-cancel="$ctrl.cancel()"\n      on-complete="$ctrl.completeBrand()"\n      on-error="$ctrl.showError()"\n      show-abuse-message="$ctrl.showBrandAbuseMessage"></hen-brand-editor>\n  <hen-oauth-editor ng-if="$ctrl.step.id == \'OAUTH\'"\n      on-complete="$ctrl.setUpEnvironment()"\n      on-cancel="$ctrl.cancel()"></hen-oauth-editor>\n  <hen-billing-page ng-if="$ctrl.step.id == \'BILLING\'"\n      on-complete="$ctrl.onBillingCompletion()"\n      on-cancel="$ctrl.cancel()"\n      api-title="$ctrl.api.serviceConfig.title"></hen-billing-page>\n  <hen-success-page ng-if="$ctrl.step.id == \'SUCCESS\'"\n      api-title="$ctrl.api.serviceConfig.title"></hen-success-page>\n  <div ng-if="$ctrl.step.id == \'LOADING\'">\n    <h1 data-test-header-title class="hen-page-header">{{$ctrl.getApiTitle()}}</h1>\n    <div class="hen-loading-page-content" layout="column">\n      <div flex></div>\n        <div layout="row">\n          <div flex></div>\n            <md-progress-circular md-mode="indeterminate" md-diameter="60" ></md-progress-circular>\n          <div flex></div>\n        </div>\n      <div flex></div>\n    </div>\n  </div>\n  <div ng-if="$ctrl.step.id == \'ERROR\'">\n    <h1 data-test-header-title class="hen-page-header">{{$ctrl.errorMessage.title}}</h1>\n    <hen-message type="error" class="hen-error-page-content">\n      {{$ctrl.errorMessage.description}}\n    </hen-message>\n    <div class="hen-button-bar">\n      <div layout="row">\n        <div flex></div>\n        <div>\n          <md-button ng-click="$ctrl.cancel()" class="md-primary">\n            Close\n          </md-button>\n        </div>\n      </div>\n    </div>\n  </div>\n'),
a.put("components/oauth_editor/oauth-editor.html",['<h1 data-test-header-title class="hen-page-header">\n  Configure your OAuth client\n</h1>\n<div class="hen-oauth-page-content">\n  <form name="oauthRestrictionForm"\n        novalidate\n        ng-submit="oauthRestrictionForm.$valid && $ctrl.onComplete()">\n    <div class="hen-oauth-details">\n      <div class="hen-oauth-note" ng-if="!$ctrl.selectedClientType">\n        Each OAuth client must be scoped to a specific application environment to prevent it from being abused. Configure those details here to enable your usage.\n      </div>\n\n      <md-input-container md-no-float class="hen-oauth-platform-selector">\n        <md-select required\n          name="platform"\n          ng-model="$ctrl.selectedClientType"',
'          placeholder="'+c("Where are you calling from?")+'"','          ng-change="$ctrl.updateSelectedClientType()">\n          <md-option ng-value="clientType"\n                     ng-repeat="(clientType, clientTypeDetails) in $ctrl.ClientTypeDetails">\n            {{::clientTypeDetails.label}}\n          </md-option>\n        </md-select>\n        <div ng-messages="oauthRestrictionForm.platform.$error" role="alert">\n          <div ng-message="required">\n            This is required\n          </div>\n        </div>\n      </md-input-container>\n\n      <div class="hen-oauth-restriction">\n        <div ng-if="$ctrl.selectedClientType == \'WEB_BROWSER\'">\n          <h5 class="hen-oauth-restriction-header">\n            Authorized Javascript Origin\n          </h5>\n          <div class="hen-oauth-restrictions-description">\n            This is the origin URI of the client application. It can\'t contain a wildcard (http://*.example.com) or a path (http://example.com/subdir). If you\'re using a nonstandard port, you must include it in the origin URI. \n          </div>\n          <md-input-container md-no-float class="md-block">\n            <input required class="hen-oauth-restriction-input"\n                   name="browser"\n                   ng-model="$ctrl.client.postMessageOrigins"\n                   type="url"\n                   placeholder="http://www.example.com">\n            <div ng-messages="oauthRestrictionForm.browser.$error" role="alert">\n              <div ng-message="url">\n                This must be a valid URL\n              </div>\n              <div ng-message="required">\n                This is required\n              </div>\n            </div>\n          </md-input-container>\n        </div>\n        <div ng-if="$ctrl.selectedClientType == \'WEB_SERVER\'">\n          <h5 class="hen-oauth-restriction-header">\n            Authorized redirect URIs\n          </h5>\n          <div class="hen-oauth-restrictions-description">\n            This is the path in your application that users are redirected to after they have authenticated with Google. The path will be appended with the authorization code for access. Must have a protocol. Cannot contain URL fragments or relative paths. Cannot be a public IP address. \n          </div>\n          <md-input-container md-no-float class="md-block">\n            <input required class="hen-oauth-restriction-input"\n              ng-model="$ctrl.client.redirectUris"\n              name="server"\n              type="url"\n              placeholder="http://www.example.com/oauth2callback">\n            <div ng-messages="oauthRestrictionForm.server.$error" role="alert">\n              <div ng-message="url">\n                This must be a valid URL\n              </div>\n              <div ng-message="required">\n                This is required\n              </div>\n            </div>\n          </md-input-container>\n        </div>\n        <div ng-if="$ctrl.selectedClientType == \'ANDROID\'">\n          <h5 class="hen-oauth-restriction-header">\n            Signing-certificate fingerprint\n          </h5>\n          <div class="hen-oauth-restrictions-description">\n            Add your package name and SHA-1 signing-certificate fingerprint to restrict usage to your Android apps. <a class="hen-link" href="{{::$ctrl.ClientTypeDetails[\'ANDROID\'].learnMoreUrl}}" target="_blank">Learn more</a>\n          </div>\n          <div class="hen-oauth-restrictions-description">\n            Get the package name from your AndroidManifest.xml file. Then use the following command to get the fingerprint:\n            <div>\n              <code class="hen-fingerprint-cmd">\n                keytool -exportcert -keystore path-to-debug-or-production-keystore -list -v\n              </code>\n            </div>\n          </div>\n          <md-input-container md-no-float class="md-block">\n            <input required class="hen-oauth-restriction-input"\n                   name="android"\n                   ng-model="$ctrl.client.nativeAppInfo.androidInfo.androidCertificateHash"\n                   ng-pattern="$ctrl.validators.ANDROID_SHA1_FINGERPRINT"\n                placeholder="12:34:56:78:90:AB:CD:EF:12:34:56:78:90:AB:CD:EF:AA:BB:CC:DD">\n            <div ng-messages="oauthRestrictionForm.android.$error">\n              <div ng-message="pattern">\n                Invalid SHA-1 certificate fingerprint\n              </div>\n              <div ng-message="required">\n                This is required\n              </div>\n            </div>\n          </md-input-container>\n        </div>\n        <div ng-if="$ctrl.selectedClientType == \'CHROME\'">\n          <h5 class="hen-oauth-restriction-header">\n            Application ID\n          </h5>\n          <div class="hen-oauth-restrictions-description">\n            The application ID appears in the URL of any dashboard or store page for your app. For example, the URL <code class="hen-oauth-url-example"> https://chrome.google.com/extensions/detail/foo?hl=en </code> has the app ID <code class="hen-oauth-url-example">foo</code>. \n          </div>\n          <md-input-container md-no-float class="md-block">\n            <input required class="hen-oauth-restriction-input"\n                ng-pattern="$ctrl.validators.CHROME_APP_ID"\n                name="chrome"\n                ng-model="$ctrl.client.nativeAppInfo.chromeInfo.extensionOrigin">\n            <div ng-messages="oauthRestrictionForm.chrome.$error">\n              <div ng-message="pattern">\n                The Chrome application ID should consist of 32 lowercase letters\n              </div>\n              <div ng-message="required">\n                This is required\n              </div>\n            </div>\n          </md-input-container>\n        </div>\n        <div ng-if="$ctrl.selectedClientType == \'IOS\'">\n          <h5 class="hen-oauth-restriction-header">\n            Bundle ID\n          </h5>\n          <div class="hen-oauth-restrictions-description">\n            The application\'s Bundle ID is the bundle identifier as listed in the app\'s .plist file. For example: <code>com.example.myapp</code>. \n          </div>\n          <md-input-container md-no-float class="md-block">\n            <input required class="hen-oauth-restriction-input"\n                ng-pattern="$ctrl.validators.IOS_BUNDLE_NAME"\n                name="ios"\n                ng-model="$ctrl.client.nativeAppInfo.iosInfo.iosBundleId">\n            <div ng-messages="oauthRestrictionForm.ios.$error">\n              <div ng-message="pattern">\n                Must be a valid iOS bundle ID\n              </div>\n              <div ng-message="required">\n                This is required\n              </div>\n            </div>\n          </md-input-container>\n        </div>\n      </div>\n    </div>\n    <div class="hen-button-bar">\n      <div layout="row">\n        <div flex></div>\n        <div>\n          <md-button ng-click="$ctrl.onCancel()">\n            Cancel\n          </md-button>\n          <md-button type="submit" class="md-primary">\n            Create\n          </md-button>\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n'].join("\n")),
a.put("components/project_selector/project-selector.html",['<md-select id="hen-project-select"\n           data-test-project-select\n           class="hen-project-selector md-accent"\n           md-container-class="hen-project-selector-container"\n           ng-model="$ctrl.projectSelectorDetails.project"','           placeholder="'+c("Select or create project")+'"','           ng-if="$ctrl.projectSelectorDetails.state == \'EXISTING_PROJECT\'"\n           ng-change="$ctrl.handleProjectChange()">\n  <md-option class="hen-project-selector-option" ng-value="$ctrl.NEW_PROJECT">\n    <span class="hen-project-selector-create-project">\n      + Create a new project\n    </span>\n  </md-option>\n  <md-divider></md-divider>\n  <md-option class="hen-project-selector-option"\n             ng-repeat="project in $ctrl.projects"\n             ng-value="project">\n    {{project.name}}\n  </md-option>\n</md-select>\n<md-input-container class="hen-project-create"\n    ng-if="$ctrl.projectSelectorDetails.state == \'NEW_PROJECT\'">\n  <form ng-submit="$ctrl.onSubmit()">\n    <label id="hen-project-create-label">\n      Enter new project name\n    </label>\n    <input\n        id="hen-project-create-input"\n        data-test-project-create-input\n        ng-model="$ctrl.projectSelectorDetails.createProjectLabel"\n        ng-model-options="{ updateOn: \'default blur\', debounce: { default: 1000, blur: 0 } }">\n  </form>\n</md-input-container>\n'].join("\n")),
a.put("components/success_page/success-page.html",'<h1 data-test-header-title class="hen-page-header">\n  You\'re all set!\n</h1>\n<div class="hen-success-page-content">\n  <div class="hen-success-page-content-main-text">{{$ctrl.getApiConfirmationText()}}</div>\n  <div ng-if="::($ctrl.credentialType == $ctrl.CredentialType.API_KEY)">\n    <div class="api-key-bar-heading">\n      YOUR API KEY\n    </div>\n    <api-key-bar key="::$ctrl.apiKey" show-api-key-name="false"></api-key-bar>\n    <hen-message type="info">\n      To improve your app\'s security, restrict this key\'s usage in the <a class="hen-link" ng-href="{{::$ctrl.getCredentialUrl()}}" target="_blank">API Console</a>.\n    </hen-message>\n  </div>\n  <div ng-if="::($ctrl.credentialType == $ctrl.CredentialType.OAUTH)">\n    <div class="hen-oauth-download">\n      <md-button ng-href="{{::$ctrl.getClientFile()}}"\n                 download="{{::$ctrl.getClientFileName()}}"\n                 class="md-raised md-primary">\n        Download client configuration</md-button>\n    </div>\n    <dl class="hen-oauth-client-details">\n      <div class="hen-oauth-client-id">\n        <dt class="hen-oauth-client-label">\n          Client ID\n        </dt>\n        <dd class="hen-oauth-client-value">{{$ctrl.client.clientId}}</dd>\n      </div>\n      <div class="hen-oauth-client-secret" ng-if="::$ctrl.hasClientSecret()">\n        <dt class="hen-oauth-client-label">\n          Client Secret\n        </dt>\n        <dd class="hen-oauth-client-value">{{$ctrl.client.clientSecret}}</dd>\n      </div>\n    </dl>\n    <hen-message type="info">\n      You can always manage your API credentials and usage later in the <a class="hen-link" ng-href="{{::$ctrl.getConsoleUrl()}}" target="_blank">API Console</a>.\n    </hen-message>\n  </div>\n  <div ng-if="::($ctrl.credentialType == $ctrl.CredentialType.SERVICE_ACCOUNT)">\n    <div>\n      Your service account has been created!\n    </div>\n    <dl class="hen-service-account-description">\n      <dt class="hen-service-account-label">\n        Service account email:\n      </dt>\n      <dd class="hen-service-account-value hen-service-account-email">\n        {{::$ctrl.serviceAccountDetails.email}}\n      </dd>\n      <dt class="hen-service-account-label">\n        Roles granted to the service account:\n      </dt>\n      <dd class="hen-service-account-value">\n        <div ng-repeat="role in ::$ctrl.serviceAccountDetails.roles"\n          class="hen-service-account-role">\n          {{role.title}}\n        </div>\n      </dd>\n    </dl>\n    <div class="hen-service-account-generate-key">\n      <md-button ng-href="{{::$ctrl.getServiceAccountKeyFile()}}"\n                 download="{{::$ctrl.getServiceAccountKeyFileName()}}"\n                 class="md-raised md-primary hen-service-account-generate-key-button">\n        Download private key JSON</md-button>\n    </div>\n    <div class="hen-service-account-details">\n      A private key has been generated for you! Download the JSON needed to authenticate. Store this file securely, as anyone with this key can act as the service account.\n    </div>\n    <hen-message type="info">\n      You can always manage your service account and its roles later in the <a class="hen-link" ng-href="{{::$ctrl.consoleLink}}" target="_blank">API Console</a>.\n    </hen-message>\n  </div>\n  <hen-message type="info" ng-if="::($ctrl.credentialType == $ctrl.CredentialType.NO_AUTH)">\n    To monitor API usage or manage project quota, use the <a class="hen-link" ng-href="{{::$ctrl.getConsoleUrl()}}" target="_blank">API Console</a>.\n  </hen-message>\n</div>\n<div class="hen-button-bar">\n  <md-button class="md-primary" ng-click="$ctrl.closeDialog()">\n    Finish\n  </md-button>\n</div>\n'),
a.put("components/tos_opt_in/tos-opt-in.html",'<div class="hen-tos">\n  <div class="hen-opt-in-text">\n    I agree that my use of any <a href="https://console.developers.google.com/terms" target="_blank"> services and related APIs</a> is subject to compliance with the applicable <a href="https://console.developers.google.com/terms" target="_blank">Terms of Service</a>. \n  </div>\n  <md-radio-group ng-model="$ctrl.isAccepted" class="md-primary">\n    <md-radio-button ng-value="$ctrl.OptInStatus.ACCEPTED" data-test-accept-tos>\n      Yes\n    </md-radio-button>\n    <md-radio-button ng-value="$ctrl.OptInStatus.DECLINED">\n      No\n    </md-radio-button>\n  </md-radio-group>\n</div>\n'))}]);var ua=function(a,b,c){this.C=a;this.ya=b;this.B=c;this.ca=c.document};ua.prototype.clickToCopyKey=function(){var a=this.ya[0].querySelector(".api-key-bar-api-key");this.B.getSelection().removeAllRanges();var b=this.ca.createRange();b.selectNodeContents(a);this.B.getSelection().addRange(b);this.ca.execCommand("copy");this.B.getSelection().removeAllRanges();w(this.C.A,"event","ClickToCopy")};ua.$inject=["analytics","$element","$window"];
var va={templateUrl:"components/api_key_bar/api-key-bar.html",bindings:{key:"<",showApiKeyName:"<"},controller:ua};var x=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,x);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};v(x,Error);x.prototype.name="CustomError";var wa=function(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c},xa=function(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")},Fa=function(a){if(!ya.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(za,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Aa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ba,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ca,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Da,"&#39;"));
-1!=a.indexOf("\x00")&&(a=a.replace(Ea,"&#0;"));return a},za=/&/g,Aa=/</g,Ba=/>/g,Ca=/"/g,Da=/'/g,Ea=/\x00/g,ya=/[\x00&<>"']/,Ga=function(a){return Array.prototype.join.call(arguments,"")};var y=function(a,b){b.unshift(a);x.call(this,xa.apply(null,b));b.shift()};v(y,x);y.prototype.name="AssertionError";
var z=function(a,b,c,d){var e="Assertion failed";if(c){e+=": "+c;var g=d}else a&&(e+=": "+a,g=b);throw new y(""+e,g||[]);},A=function(a,b,c){a||z("",null,b,Array.prototype.slice.call(arguments,2));return a},B=function(a,b){throw new y("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));},C=function(a,b,c){q(a)||z("Expected string but got %s: %s.",[r(a),a],b,Array.prototype.slice.call(arguments,2))},D=function(a,b,c){"function"==r(a)||z("Expected function but got %s: %s.",[r(a),a],b,Array.prototype.slice.call(arguments,
2))},Ha=function(a,b,c){t(a)||z("Expected array but got %s: %s.",[r(a),a],b,Array.prototype.slice.call(arguments,2));return a};var Ia=Array.prototype.indexOf?function(a,b,c){A(null!=a.length);return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(q(a))return q(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ja=Array.prototype.map?function(a,b,c){A(null!=a.length);return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),g=q(a)?a.split(""):a,k=0;k<d;k++)k in g&&(e[k]=b.call(c,g[k],k,a));return e},Ka=function(a){return Array.prototype.concat.apply([],
arguments)},La=function(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]},Ma=function(a){for(var b={},c=0,d=0;d<a.length;){var e=a[d++];var g=e;var k=typeof g;g="object"==k&&null!=g||"function"==k?"o"+(g[qa]||(g[qa]=++ra)):(typeof g).charAt(0)+g;Object.prototype.hasOwnProperty.call(b,g)||(b[g]=!0,a[c++]=e)}a.length=c};var Oa=function(a){var b=Na,c;for(c in b)if(!a.call(void 0,b[c],c,b))return!1;return!0},Pa=function(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b},Qa=function(a,b){var c=b;var d=r(c);c=(d="array"==d||"object"==d&&"number"==typeof c.length)?b:arguments;for(d=d?0:1;d<c.length&&(a=a[c[d]],void 0!==a);d++);return a},Sa=function(a){var b=Ra;a:{for(var c in b)if(a.call(void 0,b[c],c,b)){a=c;break a}a=void 0}return a&&b[a]},Ta=function(a){var b=arguments.length;if(1==b&&t(arguments[0]))return Ta.apply(null,
arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};var E=function(){},Ua="function"==typeof Uint8Array,Va=function(a,b,c){a.m=null;b||(b=[]);a.Wa=void 0;a.F=-1;a.j=b;a:{if(a.j.length){b=a.j.length-1;var d=a.j[b];if(d&&"object"==typeof d&&!t(d)&&!(Ua&&d instanceof Uint8Array)){a.J=b-a.F;a.l=d;break a}}a.J=Number.MAX_VALUE}a.Ta={};if(c)for(b=0;b<c.length;b++)d=c[b],d<a.J?(d+=a.F,a.j[d]=a.j[d]||F):a.l[d]=a.l[d]||F},F=Object.freeze?Object.freeze([]):[],G=function(a,b){if(b<a.J){b+=a.F;var c=a.j[b];return c===F?a.j[b]=[]:c}c=a.l[b];return c===F?a.l[b]=
[]:c},Wa=function(a,b){if(b<a.J){b+=a.F;var c=a.j[b];return c===F?a.j[b]=[]:c}c=a.l[b];return c===F?a.l[b]=[]:c},H=function(a,b,c){a=G(a,b);return null==a?c:a},I=function(a,b,c){b<a.J?a.j[b+a.F]=c:a.l[b]=c},Ya=function(a){if(a.m)for(var b in a.m){var c=a.m[b];if(t(c))for(var d=0;d<c.length;d++)c[d]&&Xa(c[d]);else c&&Xa(c)}},Xa=function(a){Ya(a);return a.j};E.prototype.toString=function(){Ya(this);return this.j.toString()};
E.prototype.getExtension=function(a){if(this.l){this.m||(this.m={});var b=a.Ua;if(a.Va){if(a.za())return this.m[b]||(this.m[b]=Ja(this.l[b]||[],function(b){return new a.xa(b)})),this.m[b]}else if(a.za())return!this.m[b]&&this.l[b]&&(this.m[b]=new a.xa(this.l[b])),this.m[b];return this.l[b]}};E.prototype.clone=function(){return new this.constructor(Za(Xa(this)))};
var Za=function(a){var b;if(t(a)){for(var c=Array(a.length),d=0;d<a.length;d++)null!=(b=a[d])&&(c[d]="object"==typeof b?Za(b):b);return c}if(Ua&&a instanceof Uint8Array)return new Uint8Array(a);c={};for(d in a)null!=(b=a[d])&&(c[d]="object"==typeof b?Za(b):b);return c};var $a=function(a){Va(this,a,null)};v($a,E);var ab=function(a){var b=new $a;I(b,1,a);return b};$a.prototype.setApiKey=function(a){I(this,4,a);return this};var cb=function(a){Va(this,a,bb)};v(cb,E);var bb=[4,7,12],db={API_KEY:0,OAUTH:1,NO_AUTH:2,SERVICE_ACCOUNT:3};var fb=function(a,b,c){this.ja=a;this.serviceAccount=b;this.roles=c};l.Object.defineProperties(fb.prototype,{email:{configurable:!0,enumerable:!0,get:function(){return A(this.serviceAccount.email)}},privateKeyData:{configurable:!0,enumerable:!0,get:function(){return A(this.ja.privateKeyData)}},Da:{configurable:!0,enumerable:!0,get:function(){return this.ja.name.split("/").pop()}}});var gb=function(a,b,c,d,e){A(0<a,"Initial value must be greater than zero.");A(b>=a,"Max value should be at least as large as initial value.");void 0!==c&&A(0<=c&&1>=c,"Randomness factor should be between 0 and 1.");void 0!==d&&A(1<d,"Backoff factor should be greater than 1");void 0!==e&&A(1<=e,"Decay factor should be greater than 1");this.ea=a;this.fa=b;this.G=this.P=a;this.ma=c||0;this.ua=d||2};gb.prototype.reset=function(){this.G=this.P=this.ea};
var hb=function(a){a.G=Math.min(a.fa,a.G*a.ua);a.P=Math.min(a.fa,a.G+(a.ma?Math.round(a.ma*(Math.random()-.5)*2*a.G):0))};var ib="StopIteration"in pa?pa.StopIteration:{message:"StopIteration",stack:""},jb=function(){};jb.prototype.next=function(){throw ib;};jb.prototype.ta=function(){return this};var J=function(a,b){this.u={};this.i=[];this.M=this.v=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)},kb=function(a){K(a);return a.i.concat()};J.prototype.equals=function(a,b){if(this===a)return!0;if(this.v!=a.v)return!1;b=b||lb;K(this);for(var c,d=0;c=this.i[d];d++)if(!b(this.get(c),a.get(c)))return!1;return!0};var lb=function(a,b){return a===b};
J.prototype.clear=function(){this.u={};this.M=this.v=this.i.length=0};J.prototype.remove=function(a){return Object.prototype.hasOwnProperty.call(this.u,a)?(delete this.u[a],this.v--,this.M++,this.i.length>2*this.v&&K(this),!0):!1};
var K=function(a){var b,c;if(a.v!=a.i.length){for(b=c=0;c<a.i.length;){var d=a.i[c];Object.prototype.hasOwnProperty.call(a.u,d)&&(a.i[b++]=d);c++}a.i.length=b}if(a.v!=a.i.length){var e={};for(b=c=0;c<a.i.length;)d=a.i[c],Object.prototype.hasOwnProperty.call(e,d)||(a.i[b++]=d,e[d]=1),c++;a.i.length=b}};f=J.prototype;f.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.u,a)?this.u[a]:b};
f.set=function(a,b){Object.prototype.hasOwnProperty.call(this.u,a)||(this.v++,this.i.push(a),this.M++);this.u[a]=b};f.addAll=function(a){if(a instanceof J){var b=kb(a);K(a);for(var c=[],d=0;d<a.i.length;d++)c.push(a.u[a.i[d]]);a=c}else{b=[];c=0;for(d in a)b[c++]=d;a=Pa(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};f.forEach=function(a,b){for(var c=kb(this),d=0;d<c.length;d++){var e=c[d],g=this.get(e);a.call(b,g,e,this)}};f.clone=function(){return new J(this)};
f.ta=function(a){K(this);var b=0,c=this.M,d=this,e=new jb;e.next=function(){if(c!=d.M)throw Error("The map has changed since the iterator was created");if(b>=d.i.length)throw ib;var e=d.i[b++];return a?e:d.u[e]};return e};var mb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/,nb=function(a){return a?decodeURI(a):a},ob=function(a,b,c){C(a);if(t(b)){Ha(b);for(var d=0;d<b.length;d++)ob(a,String(b[d]),c)}else null!=b&&c.push(a+(""===b?"":"="+encodeURIComponent(String(b))))},pb=function(a,b){A(0==Math.max(a.length-(b||0),0)%2,"goog.uri.utils: Key/value lists must be even in length.");var c=[];for(b=b||0;b<a.length;b+=2)ob(a[b],a[b+1],c);return c.join("&")},
qb=function(a,b){var c=2==arguments.length?pb(arguments[1],0):pb(arguments,1);if(c){var d=a.indexOf("#");0>d&&(d=a.length);var e=a.indexOf("?");if(0>e||e>d){e=d;var g=""}else g=a.substring(e+1,d);d=[a.substr(0,e),g,a.substr(d)];e=d[1];d[1]=c?e?e+"&"+c:c:e;c=d[0]+(d[1]?"?"+d[1]:"")+d[2]}else c=a;return c},rb=/#|$/;var sb=function(a){this.A=a};sb.$inject=["embeddingPage"];var L=function(a,b,c,d){this.f=a;this.Ea=b;this.B=c;this.S=G(d,4)};L.prototype.request=function(a,b){return tb(this).then(function(){return ub(a,b)})};
var ub=function(a,b){return gapi.client.request({root:b.root,path:a.path,params:a.params||{},method:a.method||"GET",body:JSON.stringify(a.body||"")}).then(function(a){return a.result})},tb=function(a){if(!a.U){a.U=a.f.defer();a.B.onGapiClientLoaded=a.Ba.bind(a);var b=document.createElement("script");b.src="https://apis.google.com/js/client.js?onload=onGapiClientLoaded";document.body.appendChild(b)}return a.U.promise};
L.prototype.Ba=function(){gapi.config.update("googleapis.config/auth/useFirstPartyAuth",!0);gapi.config.update("googleapis.config/auth/useFirstPartyAuthV2",!0);gapi.client.setApiKey(this.S);this.U.resolve();this.Ea.$evalAsync()};L.$inject=["$q","$rootScope","$window","backends"];var vb=function(a){return"type.googleapis.com/google.rpc.PreconditionFailure"==a["@type"]?a.violations.map(function(a){return a.type}):[]},xb=function(a){return(a=Qa(a,"result","error","details"))?a.map(vb).reduce(function(a,c){return a.concat(c)},[]):[]},yb=function(a,b,c,d){this.f=a;this.R=b;this.h=c;this.c={root:A(G(d,1))}},zb=function(a,b){return a.h.request({path:"/v1/services/"+encodeURIComponent(b)},a.c)},Bb=function(a,b,c){return a.h.request({path:"/v1/services:activate",method:"POST",body:{consumerProjectId:c.projectId,
serviceNames:b}},a.c).then(function(b){var c=new gb(1E3,1E4,.5,1.5);return Ab(a,b,c)}).catch(function(b){return a.f.reject({status:b.status,Ca:xb(b)})})},Ab=function(a,b,c){if(b.error)return a.f.reject(b);if(b.metadata&&b.metadata.persisted||b.done)return a.f.when(b);var d=c.P;hb(c);return a.R(function(){return a.h.request({path:"/v1/"+b.name},a.c).then(function(b){return Ab(a,b,c)})},d)};yb.$inject=["$q","$timeout","gapiClient","backends"];var Cb={},M=ab("https://test-servicemanagement.sandbox.googleapis.com");I(M,2,"https://test-apikeys-googleapis.sandbox.google.com");I(M,9,"https://test-cloudbilling.sandbox.googleapis.com");I(M,3,"https://test-cloudresourcemanager.sandbox.googleapis.com");I(M,6,"https://test-clientauthconfig-googleapis.sandbox.google.com");I(M,8,"https://test-iam.sandbox.googleapis.com");I(M,5,"https://test-tos-pa.sandbox.googleapis.com");I(M,7,"https://dev-people-pa.corp.googleapis.com");Cb[0]=M.setApiKey("ANVavNKM_iFH3gTXsIAqHnGSrvwtic_FjHbe6hY");
var N=ab("https://servicemanagement.googleapis.com");I(N,2,"https://apikeys.googleapis.com");I(N,9,"https://cloudbilling.googleapis.com");I(N,3,"https://cloudresourcemanager.googleapis.com");I(N,6,"https://clientauthconfig.googleapis.com");I(N,8,"https://iam.googleapis.com");I(N,5,"https://tos-pa.googleapis.com");I(N,7,"https://people-pa.googleapis.com");var Db=(Cb[1]=N.setApiKey("AIzaSyD-nhJADgF50b3VFd0BVfOPZqrEpuJQHxQ"),Cb),Eb=function(a){return Db[H(a,3,1)]};Eb.$inject=["config"];var Fb=function(a,b){a=a.location.href;var c=a.search(rb),d;b:{for(d=0;0<=(d=a.indexOf("pb",d))&&d<c;){var e=a.charCodeAt(d-1);if(38==e||63==e)if(e=a.charCodeAt(d+2),!e||61==e||38==e||35==e)break b;d+=3}d=-1}if(0>d)a=null;else{e=a.indexOf("&",d);if(0>e||e>c)e=c;d+=3;a=decodeURIComponent(a.substr(d,e-d).replace(/\+/g," "))}if(!a)throw Error("Required pb parameter");try{var g=Ha(JSON.parse(a)),k=new cb(g),U=b.search().authuser;U&&I(k,11,U);return k}catch(eb){throw Error("Invalid pb parameter: '"+a+
"'");}};Fb.$inject=["$window","$location"];var Gb=function(a,b,c,d){this.f=a;this.R=b;this.h=c;this.c={root:A(G(d,3))};this.la=this.h.request({path:"/v1/projects"},this.c).then(function(a){return a.projects||[]}).then(function(a){return a.filter(function(a){return"ACTIVE"==a.lifecycleState})})},Jb=function(a,b){return a.h.request({path:"v1/projects",method:"POST",body:{name:b,projectId:Hb(b)}},a.c).then(function(b){return a.R(function(){return Ib(a,b,new gb(1E3,1E4,.5,1.1))},5E3)}).then(function(a){return a.response})},Ib=function(a,b,c){if(b.error)return a.f.reject(b);
if(b.done)return a.f.when(b);var d=c.P;hb(c);return a.R(function(){return a.h.request({path:"/v1/"+b.name},a.c).then(function(b){return Ib(a,b,c)})},d)},Lb=function(a,b){return a.h.request({path:"/v1/projects/"+b.projectId+":testIamPermissions",method:"POST",body:{permissions:Pa(Kb)}},a.c).then(function(a){return Ta(a.permissions)})},Hb=function(a){a=a.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9\-]/g,"");var b="-"+Date.now();30<(a+b).length&&(a=a.substr(0,30-b.length));return a+b};
Gb.$inject=["$q","$timeout","gapiClient","backends"];var Kb={Ja:"serviceusage.apiKeys.create",Pa:"serviceusage.apiKeys.list",Qa:"serviceusage.services.get",Na:"serviceusage.quotas.get",La:"serviceusage.services.enable",Ka:"serviceusage.services.disable"},Na=Ta(Pa(Kb));var Mb=function(a,b){this.f=a;this.D=b;this.ba="My Project";this.state="NOT_YET_SELECTED";this.ka=a.when(Na)},Nb=function(a){return"EXISTING_PROJECT"!=a.state||""==a.W?a.f.when(!0):a.ka.then(function(a){return Oa(function(b,d){return!!a[d]})})};
l.Object.defineProperties(Mb.prototype,{project:{configurable:!0,enumerable:!0,get:function(){A("EXISTING_PROJECT"==this.state);return this.W},set:function(a){A("EXISTING_PROJECT"==this.state);this.ka=(this.W=a)?Lb(this.D,A(this.W)):this.f.when(Na)}},createProjectLabel:{configurable:!0,enumerable:!0,get:function(){A("NEW_PROJECT"==this.state);return this.ba},set:function(a){A("NEW_PROJECT"==this.state);this.ba=a}}});Mb.$inject=["$q","projectService"];var Ob=function(a,b){this.c=a;this.L=b},Pb=function(a,b){b=void 0===b?"":b;var c="https://console.developers.google.com";A(0>c.indexOf("#")&&0>c.indexOf("?"),"goog.uri.utils: Fragment or query identifiers are not supported: [%s]",c);wa(c,"/")&&(c=c.substr(0,c.length-1));0==b.lastIndexOf("/",0)&&(b=b.substr(1));b=Ga(c,"/",b);c=H(a.c,11,"0")||"0";b=qb(b,"authuser",c);a="EXISTING_PROJECT"==a.L.state?(a=a.L.project)&&a.projectId||null:null;a&&(b=qb(b,"project",a));return b};Ob.$inject=["config","projectSelectorDetails"];var Qb=function(a){this.credentialType=H(a,10,0);this.aa={};this.va={authType:"SHARED_SECRET",type:"TYPE_UNSPECIFIED",displayName:"OAuth client"};this.wa="CREATE"};
l.Object.defineProperties(Qb.prototype,{apiKey:{configurable:!0,enumerable:!0,get:function(){A(0==this.credentialType);return this.S},set:function(a){A(0==this.credentialType);this.S=a}},brand:{configurable:!0,enumerable:!0,get:function(){A(1==this.credentialType);return this.aa},set:function(a){A(1==this.credentialType);this.aa=a}},client:{configurable:!0,enumerable:!0,get:function(){A(1==this.credentialType);return this.va}},serviceAccountDetails:{configurable:!0,enumerable:!0,get:function(){A(3==
this.credentialType);return this.Fa},set:function(a){A(3==this.credentialType);this.Fa=a}}});Qb.$inject=["config"];var Rb="https://devsite.googleplex.com https://developers.google.com https://cloud-dot-devsite.googleplex.com https://cloud.google.com https://console.cloud.google.com https://console.developers.google.com".split(" "),Sb=[".corp.google.com"],Tb=function(a){a=a.toLowerCase();var b=nb(a.match(mb)[3]||null)||"";return Rb.some(function(b){return a==b})||Sb.some(function(a){return wa(b,a)})},Ub=function(a,b){this.B=a;this.c=b;this.X="";a=G(this.c,5)||"";Tb(a)?this.X=a:console.error("Henhouse widget is not whitelisted for this origin: "+
a)},O=function(a,b){b=[H(a.c,1,"")].concat(b);a.X&&a.B.parent.postMessage(b,a.X)},Vb=function(a,b,c,d){d&&void 0!=d.na&&(b+="_"+(d.na?"TOS":"NO_TOS"));O(a,["loaded",c,600,b])},w=function(a,b,c){O(a,["analytics",b,c])};Ub.$inject=["$window","config"];var Wb=function(a){(G(a,6)||"").split(",").map(function(a){return Sa(function(b){return b==a})}).filter(function(a){return void 0!=a})};Wb.$inject=["config"];var Ra={Ma:"EXISTING_KEYS",Oa:"IAM"};var Xb=function(a,b){this.h=a;this.c={root:A(G(b,2))}},Yb=function(a,b){C(b.projectId);return a.h.request({path:"/v1/projects/"+encodeURIComponent(b.projectId)+"/apiKeys",method:"POST",body:{displayName:"API key"}},a.c)};Xb.$inject=["gapiClient","backends"];var Zb=function(a,b,c){this.f=a;this.h=b;this.c={root:A(G(c,6))}},$b=function(a,b){return a.h.request({method:"POST",path:"v1/clients",body:b},a.c)},ac=function(a,b){return a.h.request({method:"GET",path:"v1/brands/"+b.projectNumber},a.c).then(function(a){return t(a)?a:[a]}).catch(function(b){return b&&404==b.status?[]:a.f.reject(b)})},bc=function(a,b,c){b.projectNumbers=[c.projectNumber];return a.h.request({method:"POST",path:"v1/brands",body:b},a.c)};Zb.$inject=["$q","gapiClient","backends"];var cc=["roles/viewer"];function dc(a){return 0==a.length?cc:a.map(function(a){return 0==a.lastIndexOf("roles/",0)?a:"roles/"+a})}
var ec=function(a,b,c){this.f=a;this.h=b;this.c={root:A(G(c,8))};this.Y=new J;this.da=new J},hc=function(a,b,c){A(b.projectId,"A valid project id is required");fc(a,b.projectId);return a.O(b,0).then(function(b){var d=a.h.request({method:"POST",path:"v1/"+b.name+"/keys",body:{}},a.c);c=dc(c);var g=gc(a,b,c);return a.f.all({key:d,roles:g}).then(function(a){return new fb(a.key,b,a.roles)})})};
ec.prototype.O=function(a,b){var c=this,d="v1/projects/"+a.projectId+"/serviceAccounts",e={accountId:("starting-account-"+(Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^sa()).toString(36))).substring(0,30),serviceAccount:{displayName:"Service Account"}};return this.h.request({method:"POST",path:d,body:e},this.c).catch(function(d){return"ALREADY_EXISTS"==Qa(d,"result","error","status")?4<=b?c.f.reject(d):c.O(a,b+1):c.f.reject(d)})};
var gc=function(a,b,c){var d=["serviceAccount:"+b.email];c={bindings:c.map(function(a){return{role:a,members:d}})};return a.h.request({method:"POST",path:"v1/"+b.name+":setIamPolicy",body:{policy:c}},a.c).then(function(a){return a.bindings.map(function(a){return a.role})}).then(function(c){return ic(a,b.name.split("/")[1],c)})},ic=function(a,b,c){var d=c.map(function(b){return a.Y.get(b)});return d.every(function(a){return a})?a.f.when(d):fc(a,b).then(function(b){b=ia(b);for(var d=b.next();!d.done;d=
b.next())d=d.value,a.Y.set(d.name,d);return c.map(function(b){return a.Y.get(b)})})},fc=function(a,b){var c=a.da.get(b);if(c)return c;c=a.h.request({method:"POST",path:"v1/roles:queryGrantableRoles",body:{fullResourceName:"//cloudresourcemanager.googleapis.com/projects/"+b}},a.c).then(function(a){return a.roles});a.da.set(b,c);return c};ec.$inject=["$q","gapiClient","backends"];var jc=function(a,b,c){this.f=a;this.h=b;this.c={root:A(G(c,5))}},kc=function(a,b){return a.h.request({path:"/v1/user/0/acceptances:batchInsert",method:"POST",body:{tos_versions:b.map(function(a){return{tos_id:a.Ha,version:a.version}})}},a.c)},lc=function(a){return a.serviceConfig&&a.serviceConfig.usage&&a.serviceConfig.usage.requirements?a.serviceConfig.usage.requirements.filter(function(a){return 0==a.lastIndexOf("serviceusage.googleapis.com/tos/",0)}).map(function(a){return a.substring(32)}):[]},
nc=function(a,b){b=mc.concat(lc(b));Ma(b);return a.h.request({path:"/v1/user/0/required",params:{tos_ids:b}},a.c).then(function(a){return(a.missing||[]).map(function(a){return{Ha:a.tos.tosId,version:a.tos.version}})})};jc.$inject=["$q","gapiClient","backends"];var mc=["pantheon","cloud"];var oc=function(a,b,c){this.f=a;this.h=b;this.c={root:A(G(c,7))}};oc.prototype.getEmail=function(){var a=this;return this.h.request({method:"GET",path:"/v2/people?person_id=me"},this.c).then(function(b){return Qa(b,"personResponse",0,"person","email",0,"value")||a.f.reject("Could not retrieve email")})};oc.$inject=["$q","gapiClient","backends"];var pc=angular.module("henhouse.services.module",[]).service("apiService",yb).service("analytics",sb).service("consoleUrlService",Ob).service("credentialDetails",Qb).service("embeddingPage",Ub).service("flagService",Wb).service("gapiClient",L).service("keyService",Xb).service("oAuthService",Zb).service("projectSelectorDetails",Mb).service("projectService",Gb).service("serviceAccountService",ec).service("tosService",jc).service("userService",oc).factory("backends",Eb).factory("config",Fb);var qc=function(a){this.consoleUrl=Pb(a,"billing")};qc.prototype.$onInit=function(){D(this.onCancel,"An onCancel function must be supplied to the billing page.");D(this.onComplete,"An onComplete function must be supplied to the billing page.");C(this.apiTitle,"A valid API name must be supplied to the billing page.")};qc.$inject=["consoleUrlService"];var rc={controller:qc,templateUrl:"components/billing_page/billing-page.html",bindings:{onCancel:"&",onComplete:"&",apiTitle:"<"}};var sc=function(a,b,c){var d=this;this.N=a;this.brand=b.brand;this.pageIsLoading=!0;c.getEmail().then(function(a){d.brand.supportEmail=a;d.pageIsLoading=!1}).catch(function(){return d.onError("Unable to load user email")});this.showAbuseMessage=!1};sc.prototype.$onInit=function(){D(this.onCancel,"An onCancel function must be declared for the brand editor");D(this.onComplete,"An onComplete function must be declared for the brand editor");D(this.onError,"An onError function must be declared for the brand editor")};
sc.prototype.getConsoleUrl=function(){return Pb(this.N)};sc.$inject=["consoleUrlService","credentialDetails","userService"];var tc={controller:sc,templateUrl:"components/brand_editor/brand-editor.html",bindings:{onCancel:"&",onComplete:"&",onError:"&",showAbuseMessage:"<"}};var uc=function(a,b){var c=this;this.projects=[];this.projectSelectorDetails=b;this.NEW_PROJECT={};this.D=a;this.D.la.then(function(a){0==a.length?c.projectSelectorDetails.state="NEW_PROJECT":(c.projectSelectorDetails.state="EXISTING_PROJECT",c.projects=a,c.projects.sort(function(a,b){return(a.name||"").localeCompare(b.name||"")}))})};uc.prototype.handleProjectChange=function(){this.projectSelectorDetails.project==this.NEW_PROJECT&&(this.projectSelectorDetails.state="NEW_PROJECT")};
uc.$inject=["projectService","projectSelectorDetails"];var vc={controller:uc,bindings:{onSubmit:"&"},templateUrl:"components/project_selector/project-selector.html"};var wc={ERROR:{iconName:"warning",className:"hen-error-icon"},INFO:{iconName:"info",className:"hen-info-icon"}},xc=function(){};xc.prototype.$onInit=function(){C(this.type);this.iconDetails=wc[this.type.toUpperCase()]};var yc={controller:xc,bindings:{type:"@"},templateUrl:"components/hen_message/hen-message.html",transclude:!0};var zc={Ra:"UNRESPONDED",ACCEPTED:"ACCEPTED",DECLINED:"DECLINED"};var Ac={id:"UNDEFINED",o:0},Bc={id:"INTRO",o:225},Cc={id:"LOADING",o:250},Dc={id:"BRAND",o:260},Ec={id:"OAUTH",o:350},Fc={id:"SUCCESS",o:310},Gc={id:"ERROR",o:150},Hc={id:"BILLING",o:175},Ic={title:"Couldn't create project",description:""},Jc={title:"Something went wrong",description:"Something went wrong. Please try again."},Q=function(a,b,c,d,e,g,k,U,eb,Zc,ea,$c,wb){var h=this;this.c=e;this.OptInStatus=zc;this.C=c;this.Z=d;this.A=k;this.Aa=U;this.V=eb;this.D=Zc;this.f=a;this.Ga=$c;this.Ia=wb;this.w=
g;this.T=H(this.c,10,0);this.errorMessage=Jc;this.I=[];this.onBillingCompletion=function(){return h.showError()};this.projectSelectorDetails=ea;this.step=Ac;this.tosAccepted="UNRESPONDED";this.userProbablyHasPermission=!0;this.showBrandAbuseMessage=!1;b.$watch(function(){return[ea.state,"EXISTING_PROJECT"==ea.state&&ea.project]},function(){return Kc(h)},!0);c=zb(this.Z,H(this.c,2,"")).then(function(a){return h.api=a}).then(function(a){return nc(wb,a)}).then(function(a){return h.I=a});a.all([c,this.D.la]).then(function(){0==
h.I.length&&(h.tosAccepted="ACCEPTED");P(h,Bc);Vb(k,"/henhouse/"+h.step.id,h.step.o,{na:h.isTosVisible()})}).catch(function(){P(h,Gc);Vb(k,"/henhouse/"+h.step.id,h.step.o)});b.$watch(function(){var a=0;switch(h.step){case Bc:h.isTosVisible()&&(a+=75,h.projectLabelIsValid()||(a+=50));break;case Dc:h.showBrandAbuseMessage&&(a=75);break;case Fc:switch(h.T){case 1:a=60;break;case 3:a=80;break;case 2:a=-100}}return h.step.o+a},function(a){O(k,["resize",a,600])})};
Q.prototype.getApiTitle=function(){return H(this.c,9,"")?H(this.c,9,""):this.api&&this.api.serviceConfig&&this.api.serviceConfig.title?"Enable "+this.api.serviceConfig.title:"Enable API"};
var Lc=function(a){return 0==a.I.length?a.f.when({}):"ACCEPTED"!=a.tosAccepted?a.f.reject("Terms of Serivce must be explicitly accepted."):kc(a.Ia,a.I).catch(function(){return a.showError()})},Mc=function(a){return"ACCEPTED"!=a.tosAccepted?a.f.reject("Terms of Serivce must be explicitly accepted."):Jb(a.D,a.projectSelectorDetails.createProjectLabel).catch(function(){return a.showError(Ic)})},Oc=function(a){A(a.projectSelectorDetails.project);return Bb(a.Z,Ka(H(a.c,2,""),Wa(a.c,7)),a.projectSelectorDetails.project).catch(function(b){return Nc(a,
b)})},Nc=function(a,b){if(0<=Ia(b.Ca,"BILLING")){P(a,Hc);var c=a.f.defer();a.onBillingCompletion=function(){return c.resolve()};return c.promise.then(function(){P(a,Cc);return Oc(a)})}return a.showError()},Pc=function(a){switch(a.projectSelectorDetails.state){case "NEW_PROJECT":return Mc(a).then(function(b){a.projectSelectorDetails.state="EXISTING_PROJECT";return a.projectSelectorDetails.project=b});case "EXISTING_PROJECT":return a.projectSelectorDetails.project?a.f.when(a.projectSelectorDetails.project):
a.f.reject("No project was selected");default:return a.f.reject("Cannot get project when the project selector is not yet initialized.")}};Q.prototype.projectLabelIsValid=function(){if("NEW_PROJECT"!=this.projectSelectorDetails.state)return!0;var a=this.projectSelectorDetails.createProjectLabel;return 4<=a.length&&30>=a.length&&!!a.match(/^[a-zA-Z0-9-'" !]+$/)};
Q.prototype.isValidForFlow=function(){return this.userProbablyHasPermission&&this.tosAccepted==this.OptInStatus.ACCEPTED&&("EXISTING_PROJECT"==this.projectSelectorDetails.state&&!!this.projectSelectorDetails.project||"NEW_PROJECT"==this.projectSelectorDetails.state&&this.projectLabelIsValid())};
Q.prototype.completeBrand=function(){var a=this;P(this,Cc);Pc(this).then(function(b){bc(a.V,a.w.brand,b).then(function(b){a.w.brand=b;P(a,Ec)}).catch(function(b){b&&403==b.status?(a.showBrandAbuseMessage=!0,P(a,Dc)):a.showError().catch(angular.noop)})})};
Q.prototype.completeIntro=function(){"NEW_PROJECT"==this.projectSelectorDetails.state?w(this.C.A,"event","StartCreateNewProject"):"EXISTING_PROJECT"==this.projectSelectorDetails.state&&w(this.C.A,"event","UseExistingProject");switch(this.T){case 1:Qc(this);break;case 3:case 0:case 2:this.setUpEnvironment();break;default:this.showError()}};
var Qc=function(a){switch(a.projectSelectorDetails.state){case "NEW_PROJECT":P(a,Dc);break;case "EXISTING_PROJECT":P(a,Cc);A(a.projectSelectorDetails.project);ac(a.V,a.projectSelectorDetails.project).then(function(b){0==b.length?P(a,Dc):(a.w.brand=b[0],P(a,Ec))}).catch(function(){return a.showError()});break;default:a.showError()}},Rc=function(a){A(a.projectSelectorDetails.project);var b=a.projectSelectorDetails.project;switch(a.T){case 0:return Yb(a.Aa,b).then(function(b){return a.w.apiKey=b});case 1:var c=
a.w.client;c.brandId=a.w.brand.brandId;c.projectNumber=b.projectNumber;return $b(a.V,c).then(function(a){return angular.extend(c,a)}).catch(function(){return a.showError()});case 3:return a.O(b);case 2:return a.f.when(void 0);default:return a.f.reject("Credential creation failed - unknown credential type specified")}};Q.prototype.O=function(a){var b=this,c=Wa(this.c,12);return hc(this.Ga,a,c).then(function(a){b.w.serviceAccountDetails=a}).catch(function(){return b.showError()})};
Q.prototype.setUpEnvironment=function(){var a=this;if(this.isValidForFlow())switch(P(this,Cc),this.w.wa){case "CREATE":Lc(this).then(function(){return Pc(a)}).then(function(){return a.f.all([Oc(a),Rc(a)])}).then(function(){return P(a,Fc)}).catch(function(){return a.showError().catch(angular.noop)})}};Q.prototype.cancel=function(){O(this.A,["cancel"])};var P=function(a,b){a.step=b;b=b.id;a.step==Bc&&(b+="_"+(a.isTosVisible()?"TOS":"NO_TOS"));w(a.C.A,"virtualPageView","/henhouse/"+b)};
Q.prototype.showError=function(a){a=void 0===a?Jc:a;this.step!=Gc&&(this.errorMessage=a,P(this,Gc));return this.f.reject("An error has been displayed")};Q.prototype.isTosVisible=function(){return 0<this.I.length};var Kc=function(a){a.userProbablyHasPermission=!0;Nb(a.projectSelectorDetails).then(function(b){a.userProbablyHasPermission=b})};Q.$inject="$q $scope analytics apiService config credentialDetails embeddingPage keyService oAuthService projectService projectSelectorDetails serviceAccountService tosService".split(" ");
var Sc={controller:Q,templateUrl:"components/henhouse_flow/henhouse-flow.html"};var Tc={ANDROID_SHA1_FINGERPRINT:/^([0-9a-fA-F]{2}:){19}([0-9a-fA-F]){2}$/,CHROME_APP_ID:/^[a-z]{32}$/,IOS_BUNDLE_NAME:/^[-a-zA-Z0-9_\-.]+$/},R={},Uc=(R.WEB_BROWSER={label:"Web browser",clientType:"WEB"},R.WEB_SERVER={label:"Web server",clientType:"WEB"},R.ANDROID={label:"Android",learnMoreUrl:"https://support.google.com/googleapi/answer/6158849?hl=en#installedapplications&android",clientType:"NATIVE_ANDROID"},R.CHROME={label:"Chrome app",learnMoreUrl:"https://support.google.com/googleapi/answer/6158849?hl=en#installedapplications&chrome",
clientType:"NATIVE_CHROME_EXTENSION"},R.IOS={label:"iOS",learnMoreUrl:"https://support.google.com/googleapi/answer/6158849?hl=en#installedapplications&ios",clientType:"NATIVE_IOS"},R.PS4={label:"Playstation 4",clientType:"NATIVE_SONY"},R),S=function(a){this.ClientTypeDetails=Uc;this.client=a.client;this.validators=Tc};S.prototype.$onInit=function(){D(this.onCancel,"An onCancel function must be declared for the oauth editor");D(this.onComplete,"An onComplete function must be declared for the oauth editor")};
S.prototype.updateSelectedClientType=function(){this.client.type=this.ClientTypeDetails[this.selectedClientType].clientType};S.prototype.updateSelectedClientType=S.prototype.updateSelectedClientType;S.$inject=["credentialDetails"];var Vc={controller:S,templateUrl:"components/oauth_editor/oauth-editor.html",bindings:{onCancel:"&",onComplete:"&"}};var T=function(a,b,c,d,e,g){this.C=a;this.A=e;this.L=g;this.c=b;this.N=c;this.credentialType=d.credentialType;this.CredentialType=db;0==this.credentialType?this.apiKey=A(d.apiKey):1==this.credentialType?this.client=A(d.client):3==this.credentialType&&(this.serviceAccountDetails=A(d.serviceAccountDetails))};f=T.prototype;f.closeDialog=function(){O(this.A,["cancel"])};f.getApiConfirmationText=function(){return this.apiTitle&&!H(this.c,9,"")?"You're ready to start developing with "+this.apiTitle:"You're ready to start developing!"};
f.getClientFileName=function(){return"NATIVE_IOS"==this.client.type?"credentials.plist":"credentials.json"};
f.getClientFile=function(){if("NATIVE_IOS"==this.client.type){var a=this.client;A("NATIVE_IOS"==a.type,"The client must be an iOS client.");C(a.clientId);C(a.nativeAppInfo.iosInfo.iosBundleId);var b='<?xml version="1.0" encoding="UTF-8"?>\n    <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"\n    "http://www.apple.com/DTDs/PropertyList-1.0.dtd">\n    <plist version="1.0">\n    <dict>\n      <key>CLIENT_ID</key>\n      <string>{CLIENT_ID}</string>\n      <key>REVERSED_CLIENT_ID</key>\n      <string>{REVERSED_CLIENT_ID}</string>\n      <key>PLIST_VERSION</key>\n      <string>1</string>\n      <key>BUNDLE_ID</key>\n      <string>{BUNDLE_ID}</string>\n    </dict>\n    </plist>'.replace("{CLIENT_ID}",Fa(a.clientId)),
c=a.clientId.split(".").reverse().join(".");b=b.replace("{REVERSED_CLIENT_ID}",Fa(c));a=b=b.replace("{BUNDLE_ID}",Fa(a.nativeAppInfo.iosInfo.iosBundleId))}else a=this.client,b={client_id:a.clientId,project_id:this.L.project.projectId,auth_uri:"https://accounts.google.com/o/oauth2/auth",token_uri:"https://accounts.google.com/o/oauth2/token",auth_provider_x509_cert_url:"https://www.googleapis.com/oauth2/v1/certs"},this.hasClientSecret()&&(b.client_secret=a.clientSecret),c=Wc(this),0<c.length&&(b.redirect_uris=
c),a.postMessageOrigins&&0<a.postMessageOrigins.length&&(b.javascript_origins=a.postMessageOrigins),c={},"WEB"==a.type?c.web=b:c.installed=b,a=JSON.stringify(c);return"data:attachment/json;charset=utf-8,"+encodeURIComponent(String(a))};f.getServiceAccountKeyFileName=function(){return this.L.project.name+"-"+this.serviceAccountDetails.Da.substr(0,12)+".json"};f.getServiceAccountKeyFile=function(){return"data:attachment/json;base64;charset=utf-8,"+encodeURIComponent(String(this.serviceAccountDetails.privateKeyData))};
var Wc=function(a){a=a.client;var b=["urn:ietf:wg:oauth:2.0:oob","http://localhost"],c=La(a.redirectUris||[]);"NATIVE_ANDROID"!=a.type&&"NATIVE_IOS"!=a.type&&"NATIVE_DEVICE"!=a.type&&"NATIVE_SONY"!=a.type&&"NATIVE_APPLICATION"!=a.type||b.forEach(function(a){0<=Ia(c,a)||c.push(a)});return c};T.prototype.hasClientSecret=function(){var a=this.client;return 1==this.credentialType&&!!a.clientSecret&&("WEB"==a.type||"NATIVE_DEVICE"==a.type||"NATIVE_SONY"==a.type||"NATIVE_APPLICATION"==a.type)};
T.prototype.getConsoleUrl=function(){return Pb(this.N)};T.prototype.getCredentialUrl=function(){return Pb(this.N,0==this.credentialType?"/apis/credentials/key/"+this.apiKey.keyId:"")};T.$inject="analytics config consoleUrlService credentialDetails embeddingPage projectSelectorDetails".split(" ");var Xc={controller:T,bindings:{apiTitle:"<"},templateUrl:"components/success_page/success-page.html"};var Yc=angular.module("henhouse.components.module",["ngAnimate","ngMessages",pc.name]).component("apiKeyBar",va).component("henBillingPage",rc).component("henBrandEditor",tc).component("henFlow",Sc).component("henMessage",yc).component("henOauthEditor",Vc).component("henProjectSelector",vc).component("henSuccessPage",Xc).component("henTosOptIn",{controller:function(){return{OptInStatus:zc}},bindings:{isAccepted:"="},templateUrl:"components/tos_opt_in/tos-opt-in.html"}),ad=function(a,b){a.aHrefSanitizationWhitelist(/^\s*(https?:|data:attachment\/json;)/);
b.html5Mode({enabled:!0,requireBase:!1})};ad.$inject=["$compileProvider","$locationProvider"];Yc.config(ad);var V=function(){this.ga="";this.pa=bd};V.prototype.H=!0;var bd={};V.prototype.toString=function(){return"SafeScript{"+this.ga+"}"};var cd=function(a){if(a instanceof V&&a.constructor===V&&a.pa===bd)return a.ga;B("expected object of type SafeScript, got '"+a+"' of type "+r(a));return"type_error:SafeScript"};var W=function(){this.ia="";this.sa=dd};W.prototype.H=!0;W.prototype.toString=function(){return"TrustedResourceUrl{"+this.ia+"}"};var ed=function(a){if(a instanceof W&&a.constructor===W&&a.sa===dd)return a.ia;B("expected object of type TrustedResourceUrl, got '"+a+"' of type "+r(a));return"type_error:TrustedResourceUrl"},dd={};var X=function(){this.K="";this.ra=fd};X.prototype.H=!0;X.prototype.toString=function(){return"SafeUrl{"+this.K+"}"};var gd=function(a){if(a instanceof X&&a.constructor===X&&a.ra===fd)return a.K;B("expected object of type SafeUrl, got '"+a+"' of type "+r(a));return"type_error:SafeUrl"},fd={};var Y=function(){this.ha="";this.qa=hd};Y.prototype.H=!0;var hd={};Y.prototype.toString=function(){return"SafeStyle{"+this.ha+"}"};var id=function(a){if(a instanceof Y&&a.constructor===Y&&a.qa===hd)return a.ha;B("expected object of type SafeStyle, got '"+a+"' of type "+r(a));return"type_error:SafeStyle"};var Z=function(){this.K="";this.oa=jd};Z.prototype.H=!0;Z.prototype.toString=function(){return"SafeHtml{"+this.K+"}"};var kd=function(a){if(a instanceof Z&&a.constructor===Z&&a.oa===jd)return a.K;B("expected object of type SafeHtml, got '"+a+"' of type "+r(a));return"type_error:SafeHtml"},jd={};u("ng.safehtml.googSceHelper.isGoogHtmlType",function(a){return a&&a.H?!0:!1});u("ng.safehtml.googSceHelper.isCOMPILED",function(){return!0});u("ng.safehtml.googSceHelper.unwrapAny",function(a){if(a instanceof W)return ed(a);if(a instanceof Z)return kd(a);if(a instanceof X)return gd(a);if(a instanceof Y)return id(a);if(a instanceof V)return cd(a);throw Error();});
u("ng.safehtml.googSceHelper.unwrapGivenContext",function(a,b){if("html"==a)return kd(b);if("resourceUrl"==a||"templateUrl"==a)return ed(b);if("url"==a)return b instanceof W?ed(b):gd(b);if("css"==a)return id(b);if("js"==a)return cd(b);throw Error();});var ld=function(a){a.definePalette("henBlue",a.extendPalette("blue",{500:"4285F4"}));a.definePalette("henAccents",a.extendPalette("grey",{A200:"A1C2FA"}));a.theme("default").primaryPalette("henBlue").accentPalette("henAccents",{"hue-2":"600"})};ld.$inject=["$mdThemingProvider"];angular.module("henhouse",[Yc.name,ta.name,"ngMaterial"]).config(ld);
